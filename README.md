# test_task_tree_menu
Древовидное меню реализованное на python/django, используя кастомный template tag.

## Описание работы:

### Models
Есть две модели `Menu` и `MenuItem`.

- Модель `Menu` предназначена для создания корневого пунка меню.
- Модель `MenuItem` для подпунктов `Menu``.

Таблица ``MenuItem`` может ссылаться как на таблицу ``Menu`` так на на саму себя. Это нужно для того, чтобы можно было создавать меню любой глубины.\
Для размещения меню используется шаблонный тэг `draw_menu`. Он имеет обязательный параметр `"menu_name"`, Для выбора нужного меню одного или несколько(поле name в таблице **Menu** не уникально) на странице.
>***Примечание***
>Важно отметить, что при добавление в таблицу ``MenuItem`` ссылки на ``Menu`` и на родительский ``MenuItem``, этот пункт меню будет отображаться и там и там, что приведет к тому, что пункт меню будет отображаться в двух местах.
>Такое поведение может быть как нежелательным, так и наоборот востребованным 

### Views
Есть два контроллера `IndexPageView` и `SubMenuPageView`.

- Контроллер `IndexPageView` - это класс наследник `TemplateView`, он используется для демонстрации отображения корневого меню. Использует шаблон `index_menu.html`.
- Контроллер `SubMenuPageView` - это класс наследние `ListView`, он используется для демонстрации отображения всех пунктов корневого меню и подпунктов, формируя QuerySet на основе поля `menu_url`.

### Urls
Есть два маршрута 'нулевой' и 'path:menu_url'

- Нулевой маршрут используется для `http://<hostname>/`, это маршрут для контроллера IndexPageView.
- 'path:menu_url' используется для `http://<hostname>/<menu_url>`, это маршнурт для контроллера SubMenuPageView 

### Templates
Есть два шаблона `index_menu.html` и `items_menu.html`

- `index_menu.html` используется в контроллере `IndexPageView`, для демонстрации отображения содержит в себе шаблонный тэг `draw_menu` с параметром `menu_name` 'main_menu', поля отображаются циклом `for` в виде ссылок.
- `items_menu.html` используется в контроллере `SubMenuPageView`, для демонстрации отображения пунктов меню, поля поля отображаются циклом `for` в виде ссылок.

### Database
В качестве базы данных используется sqlite3.


## Установка и запуск:
Предпологается что у вас есть докер, если нет то скачать нужно отсюда https://www.docker.com/

Пример запуска на Linux
Для начала кланируйте репозиторий командой \
`git clone git@github.com:PhenHF/test_task_tree_menu.git` \
После чего введите запустите командой \
`sudo docker compose up -d` \
Перейдите на http://localhost:8000


Для остановки используйте команду \
`sudo docker compose down`

Так же если приложение больше не нужно не забудьте удалить контейнер и докер образ
- `sudo docker images` для просмотра списка образов
- `sudo docker ps` для просмотра запущенных контейнеров добавьте флаг -a, чтобы посмотреть все. 
- `sudo docker rmi <image_id>` для удаления образа
- `sudo docker rm <container_id> для удаления контейнера
 




